# DNS round robin 방식

> round robin 이란 DNS 서버 구성 방식 중 하나이다.
> Domain 에 대한 IP 요청 쿼리 시 round-robin 방식으로 IP 를 반환한다.

<br>

### DNS

> Domain Name System 의 약자로서 IP 네트워크에서 사용하는 시스템이다.
> 도메인 이름 시스템(DNS)은 사람이 읽을 수 있는 도메인 이름(예: www.naver.com)을 머신이 읽을 수 있는 IP 주소(예: 192.0.2.44)로 변환한다.

![](https://velog.velcdn.com/images/seul06/post/9616bdfe-1b53-4164-b14b-b5e47234aac7/image.png)

- 도메인 이름과 IP 주소를 매핑해주는 서버.
  예를 들어 www.naver.com에 DNS 쿼리가 오면 `[Root DNS]` → `[.com DNS]` → `[.naver DNS]` → `[.www DNS]` 과정을 거쳐 완벽한 주소를 찾아 IP 주소를 매핑한다. 이를 통해 IP 주소가 바뀌어도 사용자들에게 똑같은 도메인 주소로 서비스할 수 있다.
  www.naver.com의 IP 주소가 222.111.222.111에서 222.111.222.122로 바뀌었음에도 똑같은 www.naver.com이라는 주소로 서비스가 가능하다.

📌 DNS Query <br>
DNS 서버에서 Domain Name 이용하여 IP 를 받아온다.
이때 Domain Name Server 접속하는 유저에 대해서 Round Robin 방식으로 IP 를 할당한다.

<br>

### Round Robin

> 라운드 로빈 DNS는 별도의 소프트웨어 혹은 하드웨어 로드밸런싱 장비를 사용하지 않고, DNS만을 이용해서 도메인 레코드 정보를 조회하는 시점에서 트래픽을 분산하는 기법이다.

- 현대 컴퓨터가 쓰는 스케줄링인 우선순위 스케줄링의 일종이다. 각 프로세스는 동일한 할당 시간을 주고 그 시간 안에 끝나지 않으면 다시 준비 큐(ready queue)의 뒤로 가는 알고리즘이다.
- 이 알고리즘은 로드밸런서에서 트래픽 분산 알고리즘으로도 쓰인다.

📌 용어 알기 <br>
로드 밸런서: 서버에 가해지는 부하(=로드)를 분산(=밸런싱)해주는 장치 또는 기술을 통칭한다. <br>
로드 밸런싱 : 트래픽을 분산시켜주는 컴퓨터 네트워크의 기법 <br>
DNS 레코드 : DNS 상에서 도메인에 관한 설정을 하기 위해 사용되는 일련의 문자들을 통칭

<br>

#### 라운드 로빈 DNS의 원리

웹 서버로 예를 들자면, 웹 서비스를 담당할 여러 대의 웹 서버는 자신의 공인 IP를 각각 가지고 있다. 웹 사이트에 접속을 원하는 사용자가 해당 도메인 주소를 브라우저에 입력하면, DNS는 도메인의 정보를 조회하는 데, 이때 IP 주소를 여러 대의 서버 IP 리스트 중에서 라운드 로빈 형태로 랜덤하게 하나 혹은 여러개를 선택하여 다시 사용자에게 알려준다.

결과적으로 웹 사이트에 접속하는 다수의 사용자는 실제로는 복수의 웹 서버에 나뉘어 접속하게 되면서 자연스럽게 서버의 부하가 분산되는 방식이다.

▼ 라운드 로빈 DNS를 이용한 로드 밸런싱
![](https://velog.velcdn.com/images/seul06/post/3447f267-21f7-4540-8383-3e2af8800c97/image.png)
