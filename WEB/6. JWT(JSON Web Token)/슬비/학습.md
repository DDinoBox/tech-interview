# JWT(JSON Web Token)

> **유저 정보를 담은 JSON 데이터를 암호화 해서 클라이언트와 서버간에 주고 받는 것**으로, JSON 포맷을 이용하여 사용자에 대한 속성을 저장하는 Claim 기반의 Web Token이다. <br>
> 현대 웹서비스에서는 토큰을 사용하여 사용자들의 인증 작업을 처리하는 것이 가장 좋은 방법이며, **JWT는 토큰 기반의 인증 시스템**에서 주로 사용된다.

![](https://velog.velcdn.com/images/seul06/post/ac421b7d-9044-4f11-b3f3-91924aac7519/image.png)

- JWT(Json Web Token)란 Json 포맷을 이용하여 사용자에 대한 속성을 저장하는 **Claim 기반의 Web Token**이다.
- JWT는 **Claim 기반**이라는 방식을 사용하는데, Claim이라는 사용자에 대한 프로퍼티나 속성을 말한다.
  → **토큰 자체가 정보를 가지고** 있는 방식으로, JWT는 이 Claim을 JSON을 이용해서 정의 한다.

<br>

### Claim 기반

#### 📌 Claim을 JSON으로 나타낸 예시)

JSON자체를 토큰으로 사용하는 것이 Claim기반의 토큰 방식이다.

```
{
    "id":"terry"
    ,"role":["admin","user"]
    ,"company":"pepsi"
}
```

❓ Claim 방식의 토큰은 무엇이 좋을까? <br>
→ 이 토큰을 이용해서 요청을 받는 서버나 서비스 입장에서는 이 서비스를 호출한 사용자에 대한 추가 정보는 이미 토큰 안에 다 들어가 있기 때문에 다른 곳에서 가져올 필요가 없다!

✍️ Claim 기반의 토큰은 토큰 자체가 정보를 담음으로써, 토큰을 가지고 서비스나 API 접근을 제어할 때 별도의 작업이 서버에서 필요하지 않으며, 토큰 자체를 서버에서 관리할 필요가 없기 때문에 구현이 상대적으로 단순해진다!

<br>

### JWT의 문제점

사용이 쉽고, 서버의 개발 부담을 덜어줄 수 있다는 장점을 가지고 있지만 단점 또한 존재한다.

**1) 길이** <br>
: Claim에 넣는 데이터가 많아질수록, JWT 토큰의 길이가 길어진다. 길이가 길다는 것은 그만큼 네트워크 대역폭 낭비가 심하다는 의미이다.

**2) 한번 발급된 토큰은 값을 수정하거나 폐기가 불가** <br>
: JWT는 토큰 내에 모든 정보를 가지고 있으므로 한 번 발급된 토큰에 대한 변경은 서버에서는 더이상 불가능하다. 때문에 만약 JWT를 쓴다면, Expire time을 꼭 명시적으로 두도록하고, refresh token등을 이용해서, 중간중간 토큰을 재발행하도록 해야한다.

**3) 보안** <br>
JWT는 기본적으로 Claim에 대한 정보를 암호화하지 않는다. 특히 자바스크립트 기반의 웹 클라이언트의 경우 브라우저상의 디버거등을 통해서 토큰이 노출될 가능성이 높다. <br>
그래서, 이를 보완하는 방법으로는 토큰 자체를 암호화하는 방법이 있는데, JSON을 암호화하기 위한 스펙으로는 JWE(JSON Web Encryption)이 있다고 한다. 🧐
