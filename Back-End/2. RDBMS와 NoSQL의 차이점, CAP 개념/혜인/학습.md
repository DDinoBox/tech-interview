# RDBMS와 NoSQL의 차이점, CAP 개념
## RDBMS(Relational DataBase Management System)란?
관계형 데이터베이스는 1970년대에 IBM에서 일하던 에드거 F. 커드가 제안한 데이터베이스 모델이다.
관계형 데이터 베이스는 데이터를 테이블 형태로 저장한다.
각 데이터 항목들은 행(row)에 저장되고, 항목의 속성은 열(column)에 저장된다.

> 용어 정리 <br>
열(column) : 필드(field) 라고도 부르며, 항목의 속성(명칭)을 나타낸다.  필드 마다 각각 정수, 텍스트 같은 데이터 유형을 정할 수 있다. <br>
행(row) : 레코드(record) 라고도 부르며, 각 데이터 항목을 저장한다. <br>
스키마(schema) : 필드는 데이터 유형뿐만 아니라 제약사항도 지정할 수 있는데 이러한 제약사항을 스키마라고 부른다. 

## RDBMS 특징
 - 트랜잭션(전부 아니면 무): 전체 트랜잭션이 하나의 단위로 기록. 실패 시 전체 롤백
 - 정규화: DB설계 시 중복을 최소화해서 구조화하는 프로세스

## RDBMS 장단점
```장점```
- 데이터의 성능이 일반적으로 좋아 정렬, 탐색, 분류가 빠름
- 신뢰성이 높아 데이터의 무결성을 보장
- 정규화에 따른 갱신 비용을 최소화
- SQL이라는 구조화 된 질의를 통해 데이터를 다룰수 있음

```단점```
- 기존에 작성된 스키마를 수정하기 어려움
- 데이터베이스의 부하를 분석하기 어려움
- 빅데이터를 처리하는데 비효율적임

## NoSQL이란?
카를로 스트로찌(Carlo Strozzi)는 1998년 표준 SQL 인터페이스를 채용하지 않은 자신의 경량 오픈 소스 관계형 데이터베이스를 NoSQL이라고 명명했다. <br>
NoSQL에 대해 No + SQL혹은 Not only SQL 등 의견이 분분하지만 현재는 'Not only SQL'의 약자라는 의견이 우세하다고 한다. 하지만 어떤 의견이든 NoSQL이 관계형 데이터베이스가 아닌 비관계형 데이터베이스로 보는 시각은 동일하다. <br>
기존의 관계형 데이터베이스의 한계를 뛰어넘기 위해 만들어진 새로운 형태의 데이터베이스라서,
관계형 데이터베이스보다 더 융통성 있는 데이터 모델을 사용하며, 데이터의 저장 및 검색에 특화된 메커니즘을 제공하고 분산 환경에서의 데이터 처리를 더욱 빠르게 하기 위해 개발되었다.

## NoSQL 특징
- 거대한 Map으로서 key-value 형식을 지원함.
- 관계형 db와 달리 PK,FK JOIN등 관계를 정의하지 않음.
- 스키마에 대한 정의가 없다.

## NoSQL 방식 
1. Key-Value DB
   - Key-Value 방식으로 데이터를 저장
   - Key값은 모든 데이터 타입을 수용할 수 있고, 중복되지 않는 유니크한 값
   - 간단한 구조인 만큼 속도가 빠른 편이다.
   - 대표적으로 Redis, AWS DynamoDB, Riak 등이 있다.
2. Document DB
   - Key-Value에서 확장된 방식으로, Key-Document 형태로 저장된다.
   - Document는 계층적인 데이터 타입(JSON, XML)으로 저장되는 장점이 있다.
   - JSON 타입을 사용하므로 HTTP 기반의 웹서버의 경우 데이터를 편리하게 주고받을 수 있다.
   - 대표적으로 MongoDB, Couch DB 등이 있다.
3. Gragh DB
   - 데이터를 Node와 Edge, Property와 함께 그래프 구조를 사용하여 데이터를 저장한다.
   - 객체와 관계를 그래프 형태로 표현한 것으로 관계형모델이라고 할 수 있으며, 데이터 간의 관계가 키일 경우에 적합하다.
   - SNS, Network Diagrams 등에 사용되고, SNS에서 함께 아는 친구 찾기, 추천 등 연관된 데이터를 추천해주는 엔진이나 패턴 기능에 사용된다.
   - 대표적으로 Neo4j가 있다.
4. Column DB
   - Key, Value와 유사한 형태이다. 데이터가 내부에서 Key를 기준으로 오름차순 저장되는 차이점이 있다. Order by를 제공하지 않는 NoSQL에서 다양한 방법으로 활용할 수 있다는 장점이 있다.
   - 이전의 모델들이 key-value 값을 이용해 필드를 결정했다면, 특이하게도 이 모델은 키에서 필드를 결정한다. 키는 Row(key값)와 Column-family, Column-name을 가진다. 연관된 데이터들은 같은 Column-family 안에 속해 있으며, 각자의 Column-name을 가진다. 관계형 모델로 설명하자면 어트리뷰트가 계층적인 구조를 가지고 있는 셈이다. 이렇게 저장된 데이터는 하나의 커다란 테이블로 표현이 가능하며, 질의는 Row, Column-family, Column-name을 통해 수행된다.
   - 대표적으로 HBase, Hypertable이 있다.

## NoSQL 장단점
```장점```
- 대용량 데이터 처리를 하는데 효율적임.
- 읽기 작업보다 쓰기 작업이 더 빠르고 관계형 데이터베이스에 비해 쓰기와 읽기 성능이 빠름.
- 데이터 모델링이 유연함.
- 뛰어난 확장성으로 검색에 유리함.
- 최적화된 키 값 저장 기법을 사용하여 응답속도나 처리효율 등에서 성능이 뛰어남.
- 복잡한 데이터 구조를 표현할 수 있음.

```단점```
- key값에 대한 입출력만 지원
- 관계형 DB가 아니기 때문에 고정된 스키마가 없고 조인이 힘들다.
- 쿼리 처리시 데이터를 파싱 후 연산을 해야해서 큰 크기의 document를 다룰 때는 성능이 저하됨.

## CAP 이론
어떤 분산 시스템이더라도 Consistency (일관성), Availability (가용성), Partition tolerance (분할 내성)를 모두 만족할 수 없고 최대 2가지를 만족하는 시스템만 존재한다는 이론이다. 

```일관성(Consistency)``` : 데이터를 저장하는 장비가 1대 든 100대든 모든 장비에서 동일한 데이터가 저장되어 있어야 한다는 것이다. ACID 원리에서 의미하는 것과 같다. 어떤 데이터베이스 속성에 C가 있다면, 트랜잭션 기능 또는 그와 비슷한 매커니즘이 존재한다는 뜻이다.

```가용성(Availablity)``` : 가용성은 죽지 않은 상태의 모든 서버는 클라이언트에게 항상 정상 처리 응답을 보애주어야 한다는 것을 의미한다. 클라이언트가 읽기, 쓰기 요청을 하면 제대로 읽고 쓰는 작업을 해야한다. 현재 시스템에 문제가 있어서 읽을 수 없다고 보내면 가용성이 보장되지 않는 것을 뜻한다.

```분단 허용성(Partition tolerance)``` : 분단 허용성은 클러스터가 여러 대 동작하고 있을 때, 해당 클러스터 사이에 접속이 단절되어 서로 통신을 할 수 없는 상황에서도 시스템이 잘 동작해야 한다는 것이다.

CP 데이터베이스: CP 데이터베이스는 가용성을 희생하면서 일관성과 파티션 허용을 제공한다.두 노드 간에 파티션이 발생하면, 시스템은 파티션이 해결될 때까지 일관되지 않은 노드를 종료(즉, 사용 불가능하게)해야 한다.

AP 데이터베이스: AP 데이터베이스는 일관성을 희생하면서 가용성과 파티션 허용을 제공한다. 파티션이 발생하면 모든 노드를 사용할 수 있지만, 파티션의 잘못된 끝에 있는 노드는 다른 데이터보다 이전 버전의 데이터를 리턴할 수 있다. (파티션이 해결되면, AP 데이터베이스는 일반적으로 시스템의 모든 불일치를 복구하기 위해 노드를 재동기화한다.)

CA 데이터베이스: CA 데이터베이스는 모든 노드에서 일관성과 가용성을 제공한다. 그러나 시스템에 있는 두 노드 사이에 파티션이 있는 경우 이를 수행할 수 없으므로, 결함 허용을 제공할 수 없다. CA 분산 데이터베이스를 이론적으로 논의할 수 있지만, 실제적인 목적으로 CA 분산 데이터베이스는 존재할 수 없다. 그러나 이는 하나를 보유한 경우 분산 애플리케이션에 대해 CA 데이터베이스를 보유할 수 없음을 의미하지는 않다. 많은 관계형 데이터베이스는 일관성과 가용성을 제공하며, 복제를 사용하여 여러 노드에 배치될 수 있다.

> 참고사이트 : 
> - https://sjh836.tistory.com/97
> - https://noahlogs.tistory.com/37
> - https://hamait.tistory.com/197